# üîê SSH Key Setup & Secure Configuration Guide

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –ø–æ–≤–Ω–∏–π –ø—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è SSH-–∫–ª—é—á—ñ–≤, –¥–æ–¥–∞–≤–∞–Ω–Ω—è —ó—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SSH-—Å–µ—Ä–≤—ñ—Å—É –Ω–∞ Linux.

---

## üß© 1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è SSH –∫–ª—é—á—ñ–≤ (RSA, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ `id_rsa` / `id_rsa.pub`)

–ù–∞ **–ª–æ–∫–∞–ª—å–Ω—ñ–π –º–∞—à–∏–Ω—ñ** (Linux, macOS, WSL):

```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

**–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
- `-t rsa` ‚Äî —Ç–∏–ø –∫–ª—é—á–∞ (RSA ‚Äî –∫–ª–∞—Å–∏—á–Ω–∏–π —ñ —Å—É–º—ñ—Å–Ω–∏–π –∑ –±—ñ–ª—å—à—ñ—Å—Ç—é —Å–µ—Ä–≤–µ—Ä—ñ–≤).  
- `-b 4096` ‚Äî –¥–æ–≤–∂–∏–Ω–∞ –∫–ª—é—á–∞ (—á–∏–º –±—ñ–ª—å—à–∞, —Ç–∏–º –±–µ–∑–ø–µ—á–Ω—ñ—à–µ).  
- `-C` ‚Äî –∫–æ–º–µ–Ω—Ç–∞—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, email –∞–±–æ –æ–ø–∏—Å).  

–î–∞–ª—ñ:
```
Enter file in which to save the key (/home/user/.ssh/id_rsa): [Enter]
Enter passphrase (empty for no passphrase): [Enter –∞–±–æ –ø–∞—Ä–æ–ª—å]
```

‚úÖ –°—Ç–≤–æ—Ä—è—Ç—å—Å—è:
- –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á ‚Üí `~/.ssh/id_rsa`  
- –ü—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á ‚Üí `~/.ssh/id_rsa.pub`

> ‚ö†Ô∏è –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∫–æ–ø—ñ—é—î–º–æ** –Ω–∞ —ñ–Ω—à—ñ —Å–µ—Ä–≤–µ—Ä–∏!

---

## üóùÔ∏è 2. –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### üîπ –í–∞—Ä—ñ–∞–Ω—Ç 1 ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (—á–µ—Ä–µ–∑ `ssh-copy-id`)

–ù–∞–π–∑—Ä—É—á–Ω—ñ—à–µ, —è–∫—â–æ –º–∞—î—à –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub user@your.server.ip
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ:
- –ö–ª—é—á –¥–æ–¥–∞—î—Ç—å—Å—è –≤ `~/.ssh/authorized_keys` –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –≤–∏—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
- –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –≤—Ö–æ–¥–∏—Ç–∏ –±–µ–∑ –ø–∞—Ä–æ–ª—è:
  ```bash
  ssh user@your.server.ip
  ```

---

### üîπ –í–∞—Ä—ñ–∞–Ω—Ç 2 ‚Äî –≤—Ä—É—á–Ω—É (—è–∫—â–æ `ssh-copy-id` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π)

1Ô∏è‚É£ –£–≤—ñ–π–¥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
ssh user@your.server.ip
```

2Ô∏è‚É£ –°—Ç–≤–æ—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥ `.ssh` (—è–∫—â–æ –Ω–µ–º–∞):
```bash
mkdir -p ~/.ssh
chmod 700 ~/.ssh
```

3Ô∏è‚É£ –í—ñ–¥–∫—Ä–∏–π –∞–±–æ —Å—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª:
```bash
nano ~/.ssh/authorized_keys
```

4Ô∏è‚É£ –í—Å—Ç–∞–≤ —Å–≤—ñ–π –ø—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á (—Ä—è–¥–æ–∫ –∑ `~/.ssh/id_rsa.pub`):
```
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC...== your_email@example.com
```

5Ô∏è‚É£ –ó–±–µ—Ä–µ–∂–∏ —ñ –≤–∏—Å—Ç–∞–≤ –ø—Ä–∞–≤–∞:
```bash
chmod 600 ~/.ssh/authorized_keys
```

6Ô∏è‚É£ –í–∏–π–¥–∏ —ñ –ø–µ—Ä–µ–≤—ñ—Ä:
```bash
exit
ssh user@your.server.ip
```

‚úÖ –Ø–∫—â–æ –≤—Å–µ –∑—Ä–æ–±–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –ª–æ–≥—ñ–Ω –±—É–¥–µ –±–µ–∑ –ø–∞—Ä–æ–ª—è.

---

## ‚öôÔ∏è 3. –ü–µ—Ä–µ–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SSH —Å–µ—Ä–≤—ñ—Å—É –Ω–∞ Linux-—Ö–æ—Å—Ç—ñ

–¶—è —á–∞—Å—Ç–∏–Ω–∞ –ø—ñ–¥–≤–∏—â—É—î **–±–µ–∑–ø–µ–∫—É —Å–µ—Ä–≤–µ—Ä–∞** —ñ –ø–æ—è—Å–Ω—é—î, —â–æ —ñ —á–æ–º—É –∑–º—ñ–Ω—é—î—Ç—å—Å—è.

–í—ñ–¥–∫—Ä–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é SSH:
```bash
sudo nano /etc/ssh/sshd_config
```

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∑–º—ñ–Ω–∏:

| –û–ø—Ü—ñ—è | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è | –ü–æ—è—Å–Ω–µ–Ω–Ω—è |
|-------|------------------------|------------|
| `PubkeyAuthentication yes` | ‚úÖ **–£–≤—ñ–º–∫–Ω—É—Ç–∏** | –î–æ–∑–≤–æ–ª—è—î –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ SSH-–∫–ª—é—á—ñ. |
| `PasswordAuthentication no` | ‚ùå **–í–∏–º–∫–Ω—É—Ç–∏** | –ó–∞–±–æ—Ä–æ–Ω—è—î –≤—Ö—ñ–¥ –ø–æ –ø–∞—Ä–æ–ª—é (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ brute-force). |
| `PermitRootLogin no` | ‚ùå **–í–∏–º–∫–Ω—É—Ç–∏** | –ó–∞–±–æ—Ä–æ–Ω—è—î –ª–æ–≥—ñ–Ω –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —è–∫ root ‚Äî –∫—Ä–∞—â–µ –ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—å –∑–≤–∏—á–∞–π–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º —ñ –ø–æ—Ç—ñ–º `sudo`. |
| `Port 22` | (–∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞ —ñ–Ω—à–∏–π, –Ω–∞–ø—Ä. `2222`) | –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—Ç, —â–æ–± –∑–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±–æ—Ç—ñ–≤, —è–∫—ñ —Å–∫–∞–Ω—É—é—Ç—å 22. |
| `MaxAuthTries 3` | 3 | –û–±–º–µ–∂—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É. |
| `AllowUsers user1 user2` | —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ | –î–æ–∑–≤–æ–ª—è—î SSH-–¥–æ—Å—Ç—É–ø –ª–∏—à–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º. |

–ü—Ä–∏–∫–ª–∞–¥ —Å–µ–∫—Ü—ñ—ó:
```bash
Port 2222
PubkeyAuthentication yes
PasswordAuthentication no
PermitRootLogin no
MaxAuthTries 3
AllowUsers ubuntu devops
```

---

### –ü—ñ—Å–ª—è –∑–º—ñ–Ω ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ SSH-—Å–µ—Ä–≤—ñ—Å:
```bash
sudo systemctl restart ssh
```

> ‚ö†Ô∏è –ù–µ –∑–∞–∫—Ä–∏–≤–∞–π –ø–æ—Ç–æ—á–Ω—É —Å–µ—Å—ñ—é –ø–æ–∫–∏ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—à, —â–æ –Ω–æ–≤–∏–π –¥–æ—Å—Ç—É–ø –ø—Ä–∞—Ü—é—î:
> —É –Ω–æ–≤–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –≤–∏–∫–æ–Ω–∞–π:
> ```bash
> ssh -p 2222 user@your.server.ip
> ```

---

### ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Å–µ—Ä–≤—ñ—Å—É:
```bash
sudo systemctl status ssh
```

---

## üîí –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ:
- –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–π–º–∞—î —Ç—ñ–ª—å–∫–∏ SSH-–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–ª—é—á—ñ.
- –ü–∞—Ä–æ–ª—ñ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–º–∫–Ω–µ–Ω–æ.
- Root –Ω–µ –º–æ–∂–µ —É–≤—ñ–π—Ç–∏ –Ω–∞–ø—Ä—è–º—É.
- –ó–æ–≤–Ω—ñ—à–Ω—ñ —Å–∫–∞–Ω–µ—Ä–∏ –Ω–µ –∑–º–æ–∂—É—Ç—å –ª–µ–≥–∫–æ –∑–Ω–∞–π—Ç–∏ —Ç–≤—ñ–π SSH.

---

¬© 2025 Secure SSH Setup Guide
